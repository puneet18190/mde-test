<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>app/assets/javascripts/general.js - DESY</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="DESY"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AdminAutocomplete.html">AdminAutocomplete</a></li>
            
                <li><a href="../classes/AdminBrowserSupport.html">AdminBrowserSupport</a></li>
            
                <li><a href="../classes/AdminCollapsed.html">AdminCollapsed</a></li>
            
                <li><a href="../classes/AdminDocumentReady.html">AdminDocumentReady</a></li>
            
                <li><a href="../classes/AjaxLoaderBinder.html">AjaxLoaderBinder</a></li>
            
                <li><a href="../classes/AjaxLoaderDocumentReady.html">AjaxLoaderDocumentReady</a></li>
            
                <li><a href="../classes/AjaxLoaderVisibility.html">AjaxLoaderVisibility</a></li>
            
                <li><a href="../classes/AudioEditorComponents.html">AudioEditorComponents</a></li>
            
                <li><a href="../classes/AudioEditorCutters.html">AudioEditorCutters</a></li>
            
                <li><a href="../classes/AudioEditorDocumentReady.html">AudioEditorDocumentReady</a></li>
            
                <li><a href="../classes/AudioEditorGalleries.html">AudioEditorGalleries</a></li>
            
                <li><a href="../classes/AudioEditorGeneral.html">AudioEditorGeneral</a></li>
            
                <li><a href="../classes/AudioEditorGraphics.html">AudioEditorGraphics</a></li>
            
                <li><a href="../classes/AudioEditorPreview.html">AudioEditorPreview</a></li>
            
                <li><a href="../classes/AudioEditorScrollpain.html">AudioEditorScrollpain</a></li>
            
                <li><a href="../classes/BrowserSupportMain.html">BrowserSupportMain</a></li>
            
                <li><a href="../classes/ButtonsAccessories.html">ButtonsAccessories</a></li>
            
                <li><a href="../classes/ButtonsDocumentReady.html">ButtonsDocumentReady</a></li>
            
                <li><a href="../classes/ButtonsLesson.html">ButtonsLesson</a></li>
            
                <li><a href="../classes/ButtonsMediaElement.html">ButtonsMediaElement</a></li>
            
                <li><a href="../classes/DashboardAccessories.html">DashboardAccessories</a></li>
            
                <li><a href="../classes/DashboardExpandedContents.html">DashboardExpandedContents</a></li>
            
                <li><a href="../classes/DashboardLessonDescriptions.html">DashboardLessonDescriptions</a></li>
            
                <li><a href="../classes/DashboardResizing.html">DashboardResizing</a></li>
            
                <li><a href="../classes/DialogsAccessories.html">DialogsAccessories</a></li>
            
                <li><a href="../classes/DialogsConfirmation.html">DialogsConfirmation</a></li>
            
                <li><a href="../classes/DialogsGalleries.html">DialogsGalleries</a></li>
            
                <li><a href="../classes/DialogsTimed.html">DialogsTimed</a></li>
            
                <li><a href="../classes/DialogsWithForm.html">DialogsWithForm</a></li>
            
                <li><a href="../classes/GalleriesAccessories.html">GalleriesAccessories</a></li>
            
                <li><a href="../classes/GalleriesDocumentReady.html">GalleriesDocumentReady</a></li>
            
                <li><a href="../classes/GalleriesInitializers.html">GalleriesInitializers</a></li>
            
                <li><a href="../classes/GeneralCentering.html">GeneralCentering</a></li>
            
                <li><a href="../classes/GeneralDocumentReady.html">GeneralDocumentReady</a></li>
            
                <li><a href="../classes/GeneralMiscellanea.html">GeneralMiscellanea</a></li>
            
                <li><a href="../classes/GeneralUrls.html">GeneralUrls</a></li>
            
                <li><a href="../classes/ImageEditorDocumentReady.html">ImageEditorDocumentReady</a></li>
            
                <li><a href="../classes/ImageEditorGraphics.html">ImageEditorGraphics</a></li>
            
                <li><a href="../classes/ImageEditorImageScale.html">ImageEditorImageScale</a></li>
            
                <li><a href="../classes/ImageEditorTexts.html">ImageEditorTexts</a></li>
            
                <li><a href="../classes/JqueryBrowsersDetection.html">JqueryBrowsersDetection</a></li>
            
                <li><a href="../classes/JqueryPatchesBrowsers.html">JqueryPatchesBrowsers</a></li>
            
                <li><a href="../classes/LessonEditorCurrentSlide.html">LessonEditorCurrentSlide</a></li>
            
                <li><a href="../classes/LessonEditorDocumentReady.html">LessonEditorDocumentReady</a></li>
            
                <li><a href="../classes/LessonEditorForms.html">LessonEditorForms</a></li>
            
                <li><a href="../classes/LessonEditorGalleries.html">LessonEditorGalleries</a></li>
            
                <li><a href="../classes/LessonEditorImageResizing.html">LessonEditorImageResizing</a></li>
            
                <li><a href="../classes/LessonEditorJqueryAnimations.html">LessonEditorJqueryAnimations</a></li>
            
                <li><a href="../classes/LessonEditorSlideLoading.html">LessonEditorSlideLoading</a></li>
            
                <li><a href="../classes/LessonEditorSlidesNavigation.html">LessonEditorSlidesNavigation</a></li>
            
                <li><a href="../classes/LessonEditorTinyMCE.html">LessonEditorTinyMCE</a></li>
            
                <li><a href="../classes/LessonViewerDocumentReady.html">LessonViewerDocumentReady</a></li>
            
                <li><a href="../classes/LessonViewerGeneral.html">LessonViewerGeneral</a></li>
            
                <li><a href="../classes/LessonViewerGraphics.html">LessonViewerGraphics</a></li>
            
                <li><a href="../classes/LessonViewerPlaylist.html">LessonViewerPlaylist</a></li>
            
                <li><a href="../classes/LessonViewerSlidesNavigation.html">LessonViewerSlidesNavigation</a></li>
            
                <li><a href="../classes/MediaElementEditorCache.html">MediaElementEditorCache</a></li>
            
                <li><a href="../classes/MediaElementEditorConversion.html">MediaElementEditorConversion</a></li>
            
                <li><a href="../classes/MediaElementEditorDocumentReady.html">MediaElementEditorDocumentReady</a></li>
            
                <li><a href="../classes/MediaElementEditorForms.html">MediaElementEditorForms</a></li>
            
                <li><a href="../classes/MediaElementEditorHorizontalTimelines.html">MediaElementEditorHorizontalTimelines</a></li>
            
                <li><a href="../classes/NotificationsAccessories.html">NotificationsAccessories</a></li>
            
                <li><a href="../classes/NotificationsDocumentReady.html">NotificationsDocumentReady</a></li>
            
                <li><a href="../classes/NotificationsGraphics.html">NotificationsGraphics</a></li>
            
                <li><a href="../classes/PlayersAudioEditor.html">PlayersAudioEditor</a></li>
            
                <li><a href="../classes/PlayersCommon.html">PlayersCommon</a></li>
            
                <li><a href="../classes/PlayersDocumentReady.html">PlayersDocumentReady</a></li>
            
                <li><a href="../classes/PlayersGeneral.html">PlayersGeneral</a></li>
            
                <li><a href="../classes/PlayersVideoEditor.html">PlayersVideoEditor</a></li>
            
                <li><a href="../classes/ProfilePrelogin.html">ProfilePrelogin</a></li>
            
                <li><a href="../classes/ProfileUsers.html">ProfileUsers</a></li>
            
                <li><a href="../classes/SearchDocumentReady.html">SearchDocumentReady</a></li>
            
                <li><a href="../classes/TagsAccessories.html">TagsAccessories</a></li>
            
                <li><a href="../classes/TagsInitializers.html">TagsInitializers</a></li>
            
                <li><a href="../classes/UploaderDocumentReady.html">UploaderDocumentReady</a></li>
            
                <li><a href="../classes/UploaderGlobal.html">UploaderGlobal</a></li>
            
                <li><a href="../classes/UploaderLoadingBar.html">UploaderLoadingBar</a></li>
            
                <li><a href="../classes/VideoEditorAddComponents.html">VideoEditorAddComponents</a></li>
            
                <li><a href="../classes/VideoEditorComponents.html">VideoEditorComponents</a></li>
            
                <li><a href="../classes/VideoEditorCutters.html">VideoEditorCutters</a></li>
            
                <li><a href="../classes/VideoEditorDocumentReady.html">VideoEditorDocumentReady</a></li>
            
                <li><a href="../classes/VideoEditorGalleries.html">VideoEditorGalleries</a></li>
            
                <li><a href="../classes/VideoEditorGeneral.html">VideoEditorGeneral</a></li>
            
                <li><a href="../classes/VideoEditorPreview.html">VideoEditorPreview</a></li>
            
                <li><a href="../classes/VideoEditorPreviewAccessories.html">VideoEditorPreviewAccessories</a></li>
            
                <li><a href="../classes/VideoEditorReplaceComponents.html">VideoEditorReplaceComponents</a></li>
            
                <li><a href="../classes/VideoEditorScrollPain.html">VideoEditorScrollPain</a></li>
            
                <li><a href="../classes/VideoEditorTextComponentEditor.html">VideoEditorTextComponentEditor</a></li>
            
                <li><a href="../classes/VirtualClassroomDocumentReady.html">VirtualClassroomDocumentReady</a></li>
            
                <li><a href="../classes/VirtualClassroomJavaScriptAnimations.html">VirtualClassroomJavaScriptAnimations</a></li>
            
                <li><a href="../classes/VirtualClassroomMultipleLoading.html">VirtualClassroomMultipleLoading</a></li>
            
                <li><a href="../classes/VirtualClassroomSendLink.html">VirtualClassroomSendLink</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/admin.html">admin</a></li>
            
                <li><a href="../modules/ajax-loader.html">ajax-loader</a></li>
            
                <li><a href="../modules/audio-editor.html">audio-editor</a></li>
            
                <li><a href="../modules/browser-support.html">browser-support</a></li>
            
                <li><a href="../modules/buttons.html">buttons</a></li>
            
                <li><a href="../modules/dashboard.html">dashboard</a></li>
            
                <li><a href="../modules/dialogs.html">dialogs</a></li>
            
                <li><a href="../modules/galleries.html">galleries</a></li>
            
                <li><a href="../modules/general.html">general</a></li>
            
                <li><a href="../modules/image-editor.html">image-editor</a></li>
            
                <li><a href="../modules/jquery-browsers.html">jquery-browsers</a></li>
            
                <li><a href="../modules/jquery-patches.html">jquery-patches</a></li>
            
                <li><a href="../modules/lesson-editor.html">lesson-editor</a></li>
            
                <li><a href="../modules/lesson-viewer.html">lesson-viewer</a></li>
            
                <li><a href="../modules/media-element-editor.html">media-element-editor</a></li>
            
                <li><a href="../modules/notifications.html">notifications</a></li>
            
                <li><a href="../modules/players.html">players</a></li>
            
                <li><a href="../modules/profile.html">profile</a></li>
            
                <li><a href="../modules/search.html">search</a></li>
            
                <li><a href="../modules/tags.html">tags</a></li>
            
                <li><a href="../modules/uploader.html">uploader</a></li>
            
                <li><a href="../modules/video-editor.html">video-editor</a></li>
            
                <li><a href="../modules/virtual-classroom.html">virtual-classroom</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: app/assets/javascripts/general.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
Generic javascript functions user throughout the application.
@module general
**/





/**
Calculates in which page the user is going to be redirected when he is watching a paginated list of items, and he resizes the screen. Used for example in the dashboard, and in the section of media elements.
@method calculateTheNewVisiblePage
@for GeneralCentering
@param for_page {Number} items for page before resizing
@param page {Number} page the user was visualizing before resizing
@param new_for_page {Number} items for page after resizing
**/
function calculateTheNewVisiblePage(for_page, page, new_for_page) {
  if(page == 1) {
    return 1;
  }
  var selected_item = for_page * (page - 1) + 1;
  return parseInt(selected_item / new_for_page) + 1;
}

/**
Centers a div into the current window.
@method centerThis
@for GeneralCentering
@param div {String} HTML selector to be centered
**/
function centerThis(div) {
  var winH = $window.height();
  var winW = $window.width();
  var centerDiv = $(div);
  centerDiv.css(&#x27;top&#x27;, winH/2 - centerDiv.height()/2);
  centerDiv.css(&#x27;left&#x27;, winW/2 - centerDiv.width()/2);
}

/**
Centers a div into a given container.
@method centerThisInContainer
@for GeneralCentering
@param div {String} HTML selector to be centered
@param container {String} HTML selector that represents the container in which the div must be centered
**/
function centerThisInContainer(div, container) {
  var contH = $(container).height();
  var contW = $(container).width();
  var centerDiv = $(div);
  centerDiv.css(&#x27;top&#x27;, (contH/2 - centerDiv.height()/2) + $(container).position().top);
  centerDiv.css(&#x27;left&#x27;, (contW/2 - centerDiv.width()/2) + $(container).position().left);
}

/**
Same structure of {{#crossLink &quot;DashboardResizing/dashboardResizeController:method&quot;}}{{/crossLink}}.
@method mediaElementsResizeController
@for GeneralCentering
@param resize_before {Boolean} if true, it resizes the elements also before calling the server
@param with_fade {Boolean} if true, it resizes with a fade
@param new_page {Number} forced page if any
**/
function mediaElementsResizeController(resize_before, with_fade, new_page) {
  if(!$(&#x27;#display_expanded_media_elements&#x27;).hasClass(&#x27;current&#x27;)) {
    return;
  }
  var info = $(&#x27;#info_container&#x27;);
  var width = $(&#x27;#media_elements_title_bar&#x27;).outerWidth();
  width = width - (width * 6 / 1000);
  var in_space = parseInt((width - 200) / 207) + 1;
  if(new_page == undefined) {
    var current_page = $(&#x27;#general_pagination .pages a&#x27;).first().data(&#x27;page&#x27;) + 1;
    var new_page = calculateTheNewVisiblePage(info.data(&#x27;in-space&#x27;) * 2, current_page, in_space * 2);
  }
  if(in_space &lt;= 50 &amp;&amp; in_space != info.data(&#x27;in-space&#x27;)) {
    info.data(&#x27;in-space&#x27;, in_space);
    if(resize_before) {
      resizeExpandedMediaElements(in_space);
    }
    var additional = with_fade ? &#x27;&#x27; : &#x27;&amp;resizing=true&#x27;;
    unbindLoader();
    $.ajax({
      type: &#x27;get&#x27;,
      url: &#x27;/media_elements?display=expanded&amp;filter=&#x27; + $(&#x27;#filter_media_elements option:selected&#x27;).val() + &#x27;&amp;page=&#x27; + new_page + &#x27;&amp;for_row=&#x27; + in_space + additional
    }).always(bindLoader);
  } else {
    resizeExpandedMediaElements(in_space);
  }
}

/**
Same structure of {{#crossLink &quot;DashboardResizing/resizeLessonsAndMediaElementsInDashboard:method&quot;}}{{/crossLink}}.
@method resizeExpandedMediaElements
@for GeneralCentering
@param for_row {Number} how many media elements fit horizontally the screen
**/
function resizeExpandedMediaElements(for_row) {
  var width = $(&#x27;#media_elements_title_bar&#x27;).outerWidth();
  var percent_margin_width = width * 3 / 1000;
  var margin = (width - 2 * percent_margin_width - for_row * 200) / (for_row - 1);
  var counter = 1;
  var one_row = ($(&#x27;#my_media_elements ._media_element_item&#x27;).length &lt;= for_row);
  $(&#x27;#my_media_elements ._media_element_item&#x27;).each(function() {
    if(counter == 1 || counter == (for_row + 1)) {
      $(this).css(&#x27;margin-left&#x27;, (percent_margin_width + &#x27;px&#x27;));
    } else {
      $(this).css(&#x27;margin-left&#x27;, (margin + &#x27;px&#x27;));
    }
    if(counter &gt; for_row) {
      $(this).css(&#x27;margin-top&#x27;, &#x27;30px&#x27;);
      $(this).css(&#x27;margin-bottom&#x27;, &#x27;10px&#x27;);
    } else {
      $(this).css(&#x27;margin-top&#x27;, &#x27;0&#x27;);
      if(one_row) {
        $(this).css(&#x27;margin-bottom&#x27;, &#x27;355px&#x27;);
      }
    }
    counter += 1;
  });
}





/**
This function guesses the browser and writes it in a class of the tag &#x27;html&#x27;.
@method browsersDocumentReady
@for GeneralDocumentReady
**/
function browsersDocumentReady() {
  var name = $.grep(_.keys($.browser), function(el, i) {
    return el !== &#x27;version&#x27;;
  })[0];
  if(name) {
    $html.addClass(name);
  }
}

/**
Initializer for functionalities which are common to sections containing media elements.
@method commonMediaElementsDocumentReady
@for GeneralDocumentReady
**/
function commonMediaElementsDocumentReady() {
  $body.on(&#x27;keydown&#x27;, &#x27;.dialogMediaElement .wrapper .change-info .part2 .title, .dialogMediaElement .wrapper .change-info .part2 .description&#x27;, function() {
    $(this).removeClass(&#x27;form_error&#x27;);
  });
  $body.on(&#x27;keydown&#x27;, &#x27;.dialogMediaElement .wrapper .change-info .part2 .tags_container .tags&#x27;, function() {
    $(this).parents(&#x27;._tags_container&#x27;).removeClass(&#x27;form_error&#x27;);
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogMediaElement .menu .close&#x27;, function() {
    closePopUp($(this).parents(&#x27;.dialogMediaElement&#x27;).attr(&#x27;id&#x27;));
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogMediaElement .menu .change-info&#x27;, function() {
    var container = $(this).parents(&#x27;.dialogMediaElement&#x27;);
    var form = container.find(&#x27;.wrapper .change-info&#x27;);
    if($(this).hasClass(&#x27;encendido&#x27;)) {
      form.hide();
      container.find(&#x27;.preview&#x27;).show();
      resetMediaElementChangeInfo(form);
      $(this).removeClass(&#x27;encendido&#x27;);
    } else {
      container.find(&#x27;.preview&#x27;).hide();
      form.show();
      $(this).addClass(&#x27;encendido&#x27;);
      disableTagsInputTooHigh(form.find(&#x27;.part2 ._tags_container&#x27;));
    }
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogMediaElement .wrapper .change-info .part3 .close&#x27;, function() {
    var container = $(this).parents(&#x27;.dialogMediaElement&#x27;);
    var form = container.find(&#x27;.wrapper .change-info&#x27;);
    form.hide();
    container.find(&#x27;.preview&#x27;).show();
    container.find(&#x27;.menu .change-info&#x27;).removeClass(&#x27;encendido&#x27;);
    resetMediaElementChangeInfo(form);
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogMediaElement .wrapper .change-info .part3 .submit&#x27;, function() {
    var container = $(this).parents(&#x27;.dialogMediaElement&#x27;);
    container.find(&#x27;form&#x27;).submit();
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogMediaElement .wrapper .change-info .errors_layer&#x27;, function() {
    var myself = $(this);
    var container = myself.parents(&#x27;.dialogMediaElement&#x27;).find(&#x27;.wrapper .change-info&#x27;);
    myself.hide();
    container.find(myself.data(&#x27;focus-selector&#x27;)).trigger(myself.data(&#x27;focus-action&#x27;));
  });
  $body.on(&#x27;mouseenter&#x27;, &#x27;.boxViewCompactMediaElement&#x27;, function() {
    var item = $(this);
    item.data(&#x27;loading-mini-thumb&#x27;, true);
    setTimeout(function() {
      if(item.data(&#x27;loading-mini-thumb&#x27;)) {
        showMiniThumbnailForMediaElementCompact(item);
      }
    }, 500);
  });
  $body.on(&#x27;mouseleave&#x27;, &#x27;.boxViewCompactMediaElement&#x27;, function() {
    var item = $(this);
    item.data(&#x27;loading-mini-thumb&#x27;, false);
    if(item.data(&#x27;loaded-mini-thumb&#x27;)) {
      hideMiniThumbnailForMediaElementCompact(item);
    }
  });
}

/**
Initializer for functionalities which are common to sections containing lessons.
@method commonLessonsDocumentReady
@for GeneralDocumentReady
**/
function commonLessonsDocumentReady() {
  $body.on(&#x27;click&#x27;,&#x27;._lesson_compact&#x27;, function() {
    if(!$(this).parent().hasClass(&#x27;_disabled&#x27;)) {
      var lessons_content = $(&#x27;.lessons-content&#x27;);
      var advanced_search_content = $(&#x27;.advanced-search-content&#x27;);
      var my_id = $(this).parent().attr(&#x27;id&#x27;);
      var my_expanded = $(&#x27;#&#x27; + my_id + &#x27; ._lesson_expanded&#x27;);
      if(my_expanded.is(&#x27;:visible&#x27;)) {
        my_expanded.hide(&#x27;blind&#x27;, {}, 500, function() {
          my_expanded.hide();
        });
        if(lessons_content.length &gt; 0) {
          lessons_content.animate({height: &#x27;665px&#x27;}, 500);
        } else {
          if ($(&#x27;form#search_lessons ._keep_searching&#x27;).data(&#x27;opened&#x27;)) {
            advanced_search_content.animate({height: &#x27;995px&#x27;}, 500);
          } else {
            advanced_search_content.animate({height: &#x27;805px&#x27;}, 500);
          }
        }
      } else {
        var there_is_expanded = $(&#x27;._lesson_expanded:visible&#x27;);
        if(there_is_expanded.length &gt; 0) {
          there_is_expanded.hide(&#x27;blind&#x27;, {}, 500, function() {
            there_is_expanded.hide();
          });
        }
        my_expanded.show(&#x27;blind&#x27;, {}, 500, function() {
          my_expanded.show();
        });
        if(lessons_content.length &gt; 0) {
          lessons_content.animate({height: &#x27;863px&#x27;}, 500);
        } else {
          if ($(&#x27;form#search_lessons ._keep_searching&#x27;).data(&#x27;opened&#x27;)) {
            advanced_search_content.animate({height: &#x27;1193px&#x27;}, 500);
          } else {
            advanced_search_content.animate({height: &#x27;1003px&#x27;}, 500);
          }
        }
      }
    }
  });
}

/**
Initializer for global functionalities, used throughout the application.
@method globalDocumentReady
@for GeneralDocumentReady
**/
function globalDocumentReady() {
  $body.on(&#x27;click&#x27;, &#x27;._close_on_click_out&#x27;, function() {
    $(&#x27;.ui-dialog-content:visible&#x27;).each(function() {
      closePopUp($(this).attr(&#x27;id&#x27;));
    });
  });
  $body.on(&#x27;mouseenter&#x27;, &#x27;.empty-situation-container a&#x27;, function() {
    $(this).find(&#x27;.plus&#x27;).addClass(&#x27;encendido&#x27;);
  });
  $body.on(&#x27;mouseleave&#x27;, &#x27;.empty-situation-container a&#x27;, function() {
    $(this).find(&#x27;.plus&#x27;).removeClass(&#x27;encendido&#x27;);
  });
  $body.on(&#x27;mouseenter&#x27;, &#x27;.highlight-with-text a&#x27;, function() {
    $(this).find(&#x27;.plus, .prompt&#x27;).addClass(&#x27;encendido&#x27;);
  });
  $body.on(&#x27;mouseleave&#x27;, &#x27;.highlight-with-text a&#x27;, function() {
    $(this).find(&#x27;.plus, .prompt&#x27;).removeClass(&#x27;encendido&#x27;);
  });
  $(&#x27;#user_school_level_id&#x27;).selectbox();
  $body.on(&#x27;keyup blur&#x27;, &#x27;input[maxlength], textarea[maxlength]&#x27;, function () {
    var myself = $(this);
    var len = myself.val().length;
    var maxlength = myself.attr(&#x27;maxlength&#x27;)
    if (maxlength &amp;&amp; len &gt; maxlength) {
      myself.val(myself.val().slice(0, maxlength));
    }
  });
  ajaxLoaderDocumentReady();
}

/**
Initializer for locations automatic filling.
@method locationsDocumentReady
@for GeneralDocumentReady
**/
function locationsDocumentReady() {
  $(&#x27;._location_select_box&#x27;).each(function() {
    $(&#x27;#&#x27; + $(this).attr(&#x27;id&#x27;)).selectbox();
  });
  $body.on(&#x27;change&#x27;, &#x27;._location_select_box&#x27;, function() {
    if(!$(this).data(&#x27;is-last&#x27;)) {
      var locations_url = &#x27;/locations/&#x27; + $(this).val() + &#x27;/find&#x27;;
      if($(this).val() == &#x27;0&#x27;) {
        var container = $(this).parents(&#x27;.profile-element&#x27;).prev();
        if(container.length &gt; 0) {
          var sub_inputs = container.find(&#x27;input&#x27;);
          if(sub_inputs.length &gt; 0) {
            locations_url = &#x27;/locations/&#x27; + sub_inputs.data(&#x27;selected&#x27;) + &#x27;/find?empty_children=true&#x27;;
          } else {
            locations_url = &#x27;/locations/&#x27; + container.find(&#x27;select&#x27;).val() + &#x27;/find?empty_children=true&#x27;;
          }
        } else {
          locations_url = &#x27;/locations/0/find&#x27;;
        }
      }
      $.ajax({
        url: locations_url,
        type: &#x27;get&#x27;
      });
    }
  });
}

/**
Initializes reports forms for both lessons and media elements.
@method reportsDocumentReady
@for GeneralDocumentReady
**/
function reportsDocumentReady() {
  $body.on(&#x27;mouseenter&#x27;, &#x27;._lesson_expanded .report&#x27;, function() {
    $(this).addClass(&#x27;encendido&#x27;);
  });
  $body.on(&#x27;mouseleave&#x27;, &#x27;._lesson_expanded .report&#x27;, function() {
    $(this).removeClass(&#x27;encendido&#x27;);
  });
  $body.on(&#x27;click&#x27;, &#x27;._lesson_expanded .report&#x27;, function() {
    var button = $(this).find(&#x27;.icon&#x27;);
    var form = $(this).next();
    if(!button.hasClass(&#x27;encendido&#x27;)) {
      button.addClass(&#x27;encendido&#x27;);
      form.show();
    } else {
      button.removeClass(&#x27;encendido&#x27;);
      form.hide();
    }
    return false;
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogMediaElement .menu .report&#x27;, function() {
    var button = $(this);
    var form = button.next();
    if(!button.hasClass(&#x27;encendido&#x27;)) {
      button.addClass(&#x27;encendido&#x27;);
      form.show();
    } else {
      button.removeClass(&#x27;encendido&#x27;);
      form.hide();
    }
    return false;
  });
  $body.on(&#x27;click&#x27;, &#x27;._report_form_content&#x27;, function(e) {
    e.preventDefault();
    return false;
  });
  $body.on(&#x27;click&#x27;, &#x27;._report_form_content ._send&#x27;, function(e) {
    $(this).closest(&#x27;form&#x27;).submit();
  });
}

/**
Functionalities necessary only for the section &#x27;my documents&#x27;.
@method sectionDocumentsDocumentReady
@for GeneralDocumentReady
**/
function sectionDocumentsDocumentReady() {
  $body.on(&#x27;click&#x27;, &#x27;#my_documents .buttons .preview&#x27;, function() {
    showDocumentInfoPopUp($(this).data(&#x27;document-id&#x27;));
  });
  $body.on(&#x27;click&#x27;, &#x27;#my_documents .buttons .destroy&#x27;, function() {
    var current_url = $(&#x27;#info_container&#x27;).data(&#x27;currenturl&#x27;);
    var document_id = $(this).data(&#x27;document-id&#x27;);
    var captions = $captions;
    var title = captions.data(&#x27;destroy-document-title&#x27;);
    var confirm = captions.data(&#x27;destroy-document-confirm&#x27;);
    var yes = captions.data(&#x27;destroy-document-yes&#x27;);
    var no = captions.data(&#x27;destroy-document-no&#x27;);
    if($(this).data(&#x27;used-in-your-lessons&#x27;)) {
      confirm = captions.data(&#x27;destroy-document-confirm-bis&#x27;);
    }
    showConfirmPopUp(title, confirm, yes, no, function() {
      $(&#x27;#dialog-confirm&#x27;).hide();
      var redirect_url = addDeleteItemToCurrentUrl(current_url, &#x27;document_&#x27; + document_id);
      $.ajax({
        type: &#x27;delete&#x27;,
        dataType: &#x27;json&#x27;,
        url: &#x27;/documents/&#x27; + document_id,
        success: function(data) {
          if(data.ok) {
            $.ajax({
              type: &#x27;get&#x27;,
              url: redirect_url
            });
          } else {
            showErrorPopUp(data.msg);
          }
        }
      });
      closePopUp(&#x27;dialog-confirm&#x27;);
    }, function() {
      closePopUp(&#x27;dialog-confirm&#x27;);
    });
  });
  $body.on(&#x27;change&#x27;, &#x27;#order_documents&#x27;, function() {
    var order = $(&#x27;#order_documents option:selected&#x27;).val();
    var word = $(&#x27;#search_documents ._word_input&#x27;).val();
    var word_placeholder = $(&#x27;#search_documents_placeholder&#x27;).val();
    $(&#x27;#search_documents_hidden_order&#x27;).val(order);
    $.get(&#x27;/documents?word=&#x27; + word + &#x27;&amp;word_placeholder=&#x27; + word_placeholder + &#x27;&amp;order=&#x27; + order);
  });
  $body.on(&#x27;keydown&#x27;, &#x27;.dialogDocument .wrapper .change-info .part2 .title, .dialogDocument .wrapper .change-info .part2 .description&#x27;, function() {
    $(this).removeClass(&#x27;form_error&#x27;);
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogDocument .menu .close&#x27;, function() {
    closePopUp($(this).parents(&#x27;.dialogDocument&#x27;).attr(&#x27;id&#x27;));
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogDocument .menu .change-info&#x27;, function() {
    var container = $(this).parents(&#x27;.dialogDocument&#x27;);
    var form = container.find(&#x27;.wrapper .change-info&#x27;);
    if($(this).hasClass(&#x27;encendido&#x27;)) {
      form.hide();
      container.find(&#x27;.preview&#x27;).show();
      resetDocumentChangeInfo(form);
      $(this).removeClass(&#x27;encendido&#x27;);
    } else {
      container.find(&#x27;.preview&#x27;).hide();
      form.show();
      $(this).addClass(&#x27;encendido&#x27;);
      disableTagsInputTooHigh(form.find(&#x27;.part2 ._tags_container&#x27;));
    }
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogDocument .wrapper .change-info .part3 .close&#x27;, function() {
    var container = $(this).parents(&#x27;.dialogDocument&#x27;);
    var form = container.find(&#x27;.wrapper .change-info&#x27;);
    form.hide();
    container.find(&#x27;.preview&#x27;).show();
    container.find(&#x27;.menu .change-info&#x27;).removeClass(&#x27;encendido&#x27;);
    resetDocumentChangeInfo(form);
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogDocument .wrapper .change-info .part3 .submit&#x27;, function() {
    var container = $(this).parents(&#x27;.dialogDocument&#x27;);
    container.find(&#x27;form&#x27;).submit();
  });
  $body.on(&#x27;click&#x27;, &#x27;.dialogDocument .wrapper .change-info .errors_layer&#x27;, function() {
    var myself = $(this);
    var container = myself.parents(&#x27;.dialogDocument&#x27;).find(&#x27;.wrapper .change-info&#x27;);
    myself.hide();
    container.find(myself.data(&#x27;focus-selector&#x27;)).trigger(myself.data(&#x27;focus-action&#x27;));
  });
  $(&#x27;#order_documents option[selected]&#x27;).first().attr(&#x27;selected&#x27;, &#x27;selected&#x27;);
  $(&#x27;#order_documents&#x27;).selectbox();
  $body.on(&#x27;keydown&#x27;, &#x27;#search_documents ._word_input&#x27;, function(e) {
    if(e.which == 13) {
      e.preventDefault();
    } else if(e.which != 39 &amp;&amp; e.which != 37) {
      var letters = $(this).data(&#x27;letters&#x27;);
      letters += 1;
      $(this).data(&#x27;letters&#x27;, letters);
      $(&#x27;#search_documents ._loader&#x27;).show();
      setTimeout(function() {
        if($(&#x27;#search_documents ._word_input&#x27;).data(&#x27;letters&#x27;) == letters) {
          $(&#x27;#search_documents ._loader&#x27;).hide();
          $(&#x27;#search_documents&#x27;).submit();
        }
      }, 1500);
    }
  });
}

/**
Functionalities necessary only for the section &#x27;my lessons&#x27;.
@method sectionLessonsDocumentReady
@for GeneralDocumentReady
**/
function sectionLessonsDocumentReady() {
  initSearchTagsAutocomplete(&#x27;#general_tag_reader_for_search&#x27;, &#x27;lesson&#x27;);
  $(&#x27;#filter_lessons option[selected]&#x27;).first().attr(&#x27;selected&#x27;, &#x27;selected&#x27;);
  $body.on(&#x27;change&#x27;, &#x27;#filter_lessons&#x27;, function() {
    var filter = $(&#x27;#filter_lessons option:selected&#x27;).val();
    var redirect_url = &#x27;/lessons?filter=&#x27; + filter;
    $.get(redirect_url);
  });
  $(&#x27;#filter_lessons&#x27;).selectbox();
}

/**
Functionalities necessary only for the section &#x27;my media elements&#x27;.
@method sectionMediaElementsDocumentReady
@for GeneralDocumentReady
**/
function sectionMediaElementsDocumentReady() {
  initSearchTagsAutocomplete(&#x27;#general_tag_reader_for_search&#x27;, &#x27;media_element&#x27;);
  $(&#x27;#filter_media_elements option[selected]&#x27;).first().attr(&#x27;selected&#x27;, &#x27;selected&#x27;);
  $body.on(&#x27;change&#x27;, &#x27;#filter_media_elements&#x27;, function() {
    var filter = $(&#x27;#filter_media_elements option:selected&#x27;).val();
    if($(&#x27;#display_expanded_media_elements&#x27;).hasClass(&#x27;current&#x27;)) {
      $(&#x27;#info_container&#x27;).data(&#x27;in-space&#x27;, 0);
      mediaElementsResizeController(false, true, 1);
    } else {
      $.get(&#x27;/media_elements?display=compact&amp;filter=&#x27; + filter);
    }
  });
  $body.on(&#x27;click&#x27;, &#x27;#display_expanded_media_elements&#x27;, function() {
    if(!$(this).hasClass(&#x27;current&#x27;)) {
      $(this).addClass(&#x27;current&#x27;);
      $(&#x27;#display_compact_media_elements&#x27;).removeClass(&#x27;current&#x27;);
      $(&#x27;#info_container&#x27;).data(&#x27;in-space&#x27;, 0);
      browserDependingScrollToTag().animate({scrollTop: ((1150 - $window.height() + $(&#x27;.global-footer&#x27;).height()) + &#x27;px&#x27;)}, 500);
      var last_item_compact = $(&#x27;.boxViewCompactMediaElement&#x27;).last();
      last_item_compact.animate({&#x27;margin-bottom&#x27;: (102 + parseInt(last_item_compact.css(&#x27;margin-bottom&#x27;))) + &#x27;px&#x27;}, 500);
      $(&#x27;.elements-content&#x27;).animate({height: &#x27;767px&#x27;}, 500, function() {
        $(this).removeClass(&#x27;fixed-compact-height&#x27;).addClass(&#x27;fixed-expanded-height&#x27;);
      });
      mediaElementsResizeController(false, true, 1);
    }
  });
  $body.on(&#x27;click&#x27;, &#x27;#display_compact_media_elements&#x27;, function() {
    if(!$(this).hasClass(&#x27;current&#x27;)) {
      $(this).addClass(&#x27;current&#x27;);
      $(&#x27;#display_expanded_media_elements&#x27;).removeClass(&#x27;current&#x27;);
      $.ajax({
        type: &#x27;get&#x27;,
        url: &#x27;/media_elements?display=compact&#x27;,
        success: function (r) {
          $(&#x27;.elements-content&#x27;).animate({height: &#x27;665px&#x27;}, 500, function() {
            $(this).removeClass(&#x27;fixed-expanded-height&#x27;).addClass(&#x27;fixed-compact-height&#x27;)
          });
        }
      });
    }
  });
  $(&#x27;#filter_media_elements&#x27;).selectbox();
  mediaElementsResizeController(false, false);
  $window.resize(function() {
    mediaElementsResizeController(true, false);
  });
}

/**
Functionalities necessary only for the sections containing notifications.
@method sectionNotificationsDocumentReady
@for GeneralDocumentReady
**/
function sectionNotificationsDocumentReady() {
  $(&#x27;#notifications_list&#x27;).jScrollPane({
    autoReinitialise: true
  });
  $document.bind(&#x27;click&#x27;, function (e) {
    var click_id = $(e.target).attr(&#x27;id&#x27;);
    var my_report = $(&#x27;.tooltipForm:visible&#x27;);
    if($(&#x27;#tooltip_content&#x27;).length &gt; 0) {
      if($(&#x27;#tooltip_content&#x27;).is(&#x27;:visible&#x27;)) {
        if(click_id != &#x27;tooltip_content&#x27; &amp;&amp; click_id != &#x27;expanded_notification&#x27; &amp;&amp; click_id != &#x27;notifications_button&#x27; &amp;&amp; $(e.target).parents(&#x27;#tooltip_content&#x27;).length == 0 &amp;&amp; $(e.target).parents(&#x27;#expanded_notification&#x27;).length == 0) {
          $(&#x27;#notifications_button&#x27;).trigger(&#x27;click&#x27;);
        }
      }
    }
    if($(&#x27;#tooltip_help&#x27;).length &gt; 0) {
      if($(&#x27;#tooltip_help&#x27;).is(&#x27;:visible&#x27;)) {
        if(click_id != &#x27;tooltip_help&#x27; &amp;&amp; click_id != &#x27;help&#x27; &amp;&amp; $(e.target).parents(&#x27;#tooltip_help&#x27;).length == 0) {
          $(&#x27;#help&#x27;).trigger(&#x27;click&#x27;);
        }
      }
    }
    if(my_report.length &gt; 0 &amp;&amp; $(e.target).parents(&#x27;#&#x27; + my_report.attr(&#x27;id&#x27;)).length == 0) {
      my_report.parent().find(&#x27;.report&#x27;).click();
    }
  });
  $(&#x27;#which_item_to_search option[selected]&#x27;).first().attr(&#x27;selected&#x27;, &#x27;selected&#x27;);
  $(&#x27;#which_item_to_search&#x27;).selectbox();
}

/**
Functionalities necessary only for the section &#x27;search&#x27;.
@method sectionSearchDocumentReady
@for GeneralDocumentReady
**/
function sectionSearchDocumentReady() {
  $(&#x27;._which_item_to_search_switch[checked]&#x27;).first().attr(&#x27;checked&#x27;, &#x27;checked&#x27;);
  $(&#x27;._order_lessons_radio_input[checked]&#x27;).first().attr(&#x27;checked&#x27;, &#x27;checked&#x27;);
  $(&#x27;._order_media_elements_radio_input[checked]&#x27;).first().attr(&#x27;checked&#x27;, &#x27;checked&#x27;);
  $(&#x27;#filter_search_lessons option[selected]&#x27;).first().attr(&#x27;selected&#x27;, &#x27;selected&#x27;);
  $(&#x27;#filter_search_media_elements option[selected]&#x27;).first().attr(&#x27;selected&#x27;, &#x27;selected&#x27;);
  $(&#x27;#filter_search_lessons_subject option[selected]&#x27;).first().attr(&#x27;selected&#x27;, &#x27;selected&#x27;);
  $(&#x27;#filter_search_lessons_school_level option[selected]&#x27;).first().attr(&#x27;selected&#x27;, &#x27;selected&#x27;);
  $(&#x27;#filter_search_lessons&#x27;).selectbox();
  $(&#x27;#filter_search_media_elements&#x27;).selectbox();
  $(&#x27;#filter_search_lessons_subject&#x27;).selectbox();
  $(&#x27;#filter_search_lessons_school_level&#x27;).selectbox();
  initSearchTagsAutocomplete(&#x27;#lessons_tag_reader_for_search&#x27;, &#x27;lesson&#x27;);
  initSearchTagsAutocomplete(&#x27;#media_elements_tag_reader_for_search&#x27;, &#x27;media_element&#x27;);
}





/**
Browser support checking, supported browsers version. It is empty. The not supported browsers version is implemented in {{#crossLink &quot;BrowserSupportMain/browserSupportMain:method&quot;}}{{/crossLink}}
@method browserSupport
@for GeneralMiscellanea
**/
function browserSupport() {
}

/**
Hides the mini thumbnail of a compact media element.
@method hideMiniThumbnailForMediaElementCompact
@for GeneralMiscellanea
@param item {Object} the compact media element
**/
function hideMiniThumbnailForMediaElementCompact(item) {
  item.data(&#x27;loaded-mini-thumb&#x27;, false);
  var mini = item.find(&#x27;.mini_thumb&#x27;);
  mini.hide(&#x27;fade&#x27;, {}, 200, function() {
    if(mini.hasClass(&#x27;audio&#x27;) || mini.hasClass(&#x27;video&#x27;)) {
      type = &#x27;video&#x27;;
      if(mini.hasClass(&#x27;audio&#x27;)) {
        type = &#x27;audio&#x27;;
      }
      var media = mini.find(type);
      media[0].pause();
      setCurrentTimeToMedia(media, 0);
    }
  });
}

/**
Initializes global variables used throughout the javascripts.
@method initializeGlobalVariables
@for GeneralMiscellanea
**/
function initializeGlobalVariables() {
  window.$body = $(&#x27;body&#x27;);
  window.$captions = $(&#x27;#popup_captions_container&#x27;);
  window.$document = $(document);
  window.$html = $(&#x27;html&#x27;);
  window.$loaderVisible = true;
  window.$loading = $(&#x27;#loading&#x27;);
  window.$parameters = $(&#x27;#popup_parameters_container&#x27;);
  window.$window = $(window);
}

/**
Shows a red error icon when somethings goes wrong. Widely used in {{#crossLinkModule &quot;lesson-editor&quot;}}{{/crossLinkModule}} and in {{#crossLinkModule &quot;image-editor&quot;}}{{/crossLinkModule}}.
@method redError
@for GeneralMiscellanea
**/
function redError() {
  $body.prepend(&#x27;&lt;span class=&quot;_slide_error&quot;&gt;&lt;/span&gt;&#x27;);
  centerThis(&#x27;._slide_error&#x27;);
  $(&#x27;._slide_error&#x27;).fadeTo(&#x27;fast&#x27;, 0).fadeTo(&#x27;fast&#x27;, 0.7).fadeTo(&#x27;fast&#x27;, 0.3).fadeOut();
}

/**
Function to convert seconds into a time string of the kind &lt;i&gt;02:35&lt;/i&gt;; used in {{#crossLinkModule &quot;video-editor&quot;}}{{/crossLinkModule}} and in {{#crossLinkModule &quot;audio-editor&quot;}}{{/crossLinkModule}}.
@method secondsToDateString
@for GeneralMiscellanea
@param seconds {Number} the seconds to be converted
**/
function secondsToDateString(seconds) {
  var mm = parseInt(seconds / 60);
  var ss = seconds % 60;
  var hh = parseInt(mm / 60);
  mm = mm % 60;
  var resp = &#x27;&#x27;;
  if(hh &gt; 0) {
    resp = hh + &#x27;:&#x27;;
  }
  if(mm &gt; 9) {
    resp = mm + &#x27;:&#x27;;
  } else {
    resp = &#x27;0&#x27; + mm + &#x27;:&#x27;;
  }
  if(ss &gt; 9) {
    resp = resp + ss;
  } else {
    resp = resp + &#x27;0&#x27; + ss;
  }
  return resp;
}

/**
Handles the errors inside standard forms.
@method showFormErrors
@for GeneralMiscellanea
@param container {Object} JQuery object for the specific uploader (audio, video, image or document)
@param errors {Hash} a hash of the kind &#x27;field&#x27;: &#x27;error&#x27;. It can&#x27;t be undefined!
**/
function showFormErrors(container, errors) {
  container.find(&#x27;.form_error&#x27;).removeClass(&#x27;form_error&#x27;);
  container.find(&#x27;.errors_layer&#x27;).hide();
  $.each(errors, function(key, value) {
    if(key == &#x27;full&#x27;) {
      container.find(&#x27;form&#x27;).hide();
      container.find(&#x27;.full_folder .msge&#x27;).text(value);
      container.find(&#x27;.full_folder&#x27;).show();
    } else {
      var layer = container.find(&#x27;.errors_layer.&#x27; + key);
      layer.text(value).show();
      container.find(layer.data(&#x27;form-error-selector&#x27;)).addClass(&#x27;form_error&#x27;);
    }
  });
  container.data(&#x27;loader-can-move&#x27;, false).data(&#x27;loader-with-errors&#x27;, true);
}

/**
Shows the mini thumbnail of a compact media element.
@method showMiniThumbnailForMediaElementCompact
@for GeneralMiscellanea
@param item {Object} the compact media element
**/
function showMiniThumbnailForMediaElementCompact(item) {
  item.data(&#x27;loaded-mini-thumb&#x27;, true);
  var position = &#x27;below&#x27;;
  var prev = item.prev();
  if(prev.length &gt; 0) {
    prev = prev.prev();
    if(prev.length &gt; 0 &amp;&amp; prev.prev().length &gt; 0) {
      position = &#x27;above&#x27;;
    }
  }
  var mini = item.find(&#x27;.mini_thumb&#x27;);
  mini.removeClass(&#x27;above below&#x27;).addClass(position).show(&#x27;fade&#x27;, {}, 200, function() {
    if(mini.hasClass(&#x27;audio&#x27;) || mini.hasClass(&#x27;video&#x27;)) {
      type = &#x27;video&#x27;;
      type_src_1 = &#x27;mp4&#x27;;
      type_src_2 = &#x27;webm&#x27;;
      if(mini.hasClass(&#x27;audio&#x27;)) {
        type = &#x27;audio&#x27;;
        type_src_1 = &#x27;m4a&#x27;;
        type_src_2 = &#x27;ogg&#x27;;
      }
      media = mini.find(type);
      if(!media.data(&#x27;loaded&#x27;)) {
        media.find(&#x27;source[type=&quot;&#x27; + type + &#x27;/&#x27; + type_src_1 + &#x27;&quot;]&#x27;).attr(&#x27;src&#x27;, media.data(type_src_1));
        media.find(&#x27;source[type=&quot;&#x27; + type + &#x27;/&#x27; + type_src_2 + &#x27;&quot;]&#x27;).attr(&#x27;src&#x27;, media.data(type_src_2));
        media.load();
        media.data(&#x27;loaded&#x27;, true);
      }
      media[0].play();
    }
  });
}





/**
Removes a parameter from an url.
@method removeURLParameter
@for GeneralUrls
@param url {String} initial url
@param param {String} param to remove
@return {String} updated url
**/
function removeURLParameter(url, param) {
  var newAdditionalURL = &#x27;&#x27;;
  var tempArray = url.split(&#x27;?&#x27;);
  var baseURL = tempArray[0];
  var additionalURL = tempArray[1];
  var temp = &#x27;&#x27;;
  if (additionalURL) {
    tempArray = additionalURL.split(&#x27;&amp;&#x27;);
    for (i=0; i &lt; tempArray.length; i++) {
      if(tempArray[i].split(&#x27;=&#x27;)[0] != param) {
        newAdditionalURL += (temp + tempArray[i]);
        temp = &#x27;&amp;&#x27;;
      }
    }
  }
  return (baseURL + &#x27;?&#x27; + newAdditionalURL);
}

/**
Adds or update new parameters to an url.
@method updateURLParameter
@for GeneralUrls
@param url {String} initial url
@param param {String} parameter
@param paramVal {String} new value for the parameter
@return {String} updated url
**/
function updateURLParameter(url, param, paramVal) {
  var newAdditionalURL = &#x27;&#x27;;
  var tempArray = url.split(&#x27;?&#x27;);
  var baseURL = tempArray[0];
  var additionalURL = tempArray[1];
  var temp = &#x27;&#x27;;
  if (additionalURL) {
    tempArray = additionalURL.split(&#x27;&amp;&#x27;);
    for (i=0; i &lt; tempArray.length; i++) {
      if(tempArray[i].split(&#x27;=&#x27;)[0] != param) {
        newAdditionalURL += (temp + tempArray[i]);
        temp = &#x27;&amp;&#x27;;
      }
    }
  }
  var rows_txt = temp + &#x27;&#x27; + param + &#x27;=&#x27; + paramVal;
  return (baseURL + &#x27;?&#x27; + newAdditionalURL + rows_txt);
}

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
